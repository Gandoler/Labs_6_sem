# Лабораторная работа #3: Стеганография

## Введение
Стеганография — это наука о скрытой передаче информации, при которой сам факт передачи остается незаметным. В отличие от криптографии, которая шифрует содержимое сообщения, стеганография маскирует само существование сообщения. Например, секретное сообщение может быть спрятано в изображении, тексте или аудиофайле.

### Историческая справка
Термин "стеганография" был введен Иоганном Тритемием в 1499 году в его трактате «Стеганография», который выдавался за магическую книгу.

### Преимущества стеганографии
- **Незаметность**: Сообщения не привлекают внимания.
- **Дополнительная защита**: Часто используется вместе с криптографией для усиления безопасности.

## Метод LSB (Least Significant Bit)
Метод LSB заключается в замене последних битов пикселей изображения на биты скрываемого сообщения. Это позволяет сохранить исходный вид изображения, так как изменения минимальны и незаметны для человеческого глаза.

### Пример использования метода LSB
Предположим, у нас есть 8-битное изображение в градациях серого и мы хотим скрыть 1 байт данных (например, `01101011`). Если мы используем два младших бита каждого пикселя, нам потребуется 4 пикселя:
- Пиксель 1: `00000001` (изменение цвета на 1/255)
- Пиксель 2: `00000010` (изменение цвета на 2/255)
- Пиксель 3: `00000010` (изменение цвета на 2/255)
- Пиксель 4: `00000011` (изменение цвета на 3/255)

Эти изменения настолько малы, что их практически невозможно заметить.

## Формат файла BMP
Файл BMP состоит из нескольких частей:
- **Заголовок файла**: содержит информацию о размере файла и смещении растра.
- **Заголовок BITMAP**: содержит информацию об изображении, такие как ширина, высота и количество бит на пиксель.
- **Палитра**: используется для хранения цветов в изображении.
- **Растр**: содержит фактические данные пикселей.

### Структура элемента палитры
```c
typedef struct tagRGBQUAD {
    char rgbBlue;
    char rgbGreen;
    char rgbRed;
    char rgbReserved;
} RGBQUAD;
```

## Задание
Необходимо написать программу для сокрытия и извлечения информации в BMP файле (True Color). Для этого нужно использовать метод LSB, где 1 байт скрываемой информации разбивается на части и встраивается в пиксели изображения.

### Кодирование байта в пиксель
```c
void hide_byte_into_pixel(RGBQUAD *pixel, uint8_t hide_byte) {
    pixel->rgbBlue &= (0xFC);
    pixel->rgbBlue |= (hide_byte >> 6) & 0x3;
    pixel->rgbGreen &= (0xFC);
    pixel->rgbGreen |= (hide_byte >> 4) & 0x3;
    pixel->rgbRed &= (0xFC);
    pixel->rgbRed |= (hide_byte >> 2) & 0x3;
    pixel->rgbReserved &= (0xFC);
    pixel->rgbReserved |= (hide_byte) & 0x3;
}
```

### Признак конца файла
EOF (0xFF) используется как признак конца скрываемого файла.

## Вариант задания
Вариант задания определяется остатком от деления номера варианта на 10. Вложенные BMP файлы содержат скрытые TXT файлы.

## Заключение
В данной лабораторной работе мы рассмотрели основы стеганографии, метод LSB и формат файла BMP. На основе полученных знаний необходимо реализовать программу для сокрытия и извлечения информации в BMP файлах.
