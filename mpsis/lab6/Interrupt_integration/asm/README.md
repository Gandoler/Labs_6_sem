# GLEB

| Машинный код  | Ассемблерная инструкция        | Описание поведения                                                                 | Время (нс) | Дополнительно                     |
|---------------|--------------------------------|------------------------------------------------------------------------------------|------------|-----------------------------------|
| 0x000297b7    | lui x15, 0x29                  | Загрузка верхних 20 бит (0x29000) в x15                                           | 10-50      | x15 = 0x29000                     |
| 0x00578793    | addi x15, x15, 0x5             | Добавление 0x5 к x15 (x15 = 0x29005)                                              | 50-70      | x15 = 0x29005                                  |
| 0x00f02023    | sw x15, 0(x0)                  | Сохранение значения x15 (0x29005) по адресу 0x0                                   | 70-110     | сохранение                                   |
| 0x000000b7    | lui x1, 0x00000                | Загрузка верхних 20 бит (0x00000) в x1                                            | 110-130    | x1 = 0x00000                      |
| 0x00508093    | addi x1, x1, 0x5               | Добавление 0x5 к x1 (x1 = 0x00005)                                                | 130-150    | x1 = 0x00005                                   |
| 0x00002103    | lw x2, 0(x0)                   | Чтение из памяти по адресу 0x0 в x2 (x2 = 0x29005)                                | 150-190    | 0x29005 на wd                              |
| 0x00700193    | addi x3, x0, 7                 | Инициализация x3 = 7 (маска)                                                      | 190-210    | x3 = 7                               |
| 0x00000213    | addi x4, x0, 0                 | Инициализация x4 = 0 (счетчик сдвига)                                             | 210-230    | x4 = 0                              |
| 0x00000293    | addi x5, x0, 0                 | Инициализация x5 = 0 (временная переменная)                                       | 230-250    | x5 = 0                            |
| 0x00100313    | addi x6, x0, 1                 | Инициализация x6 = 1 (константа)                                                  | 250-270    | x6 = 1                                 |
| 0x00000393    | addi x7, x0, 0                 | Инициализация x7 = 0 (временная переменная)                                       | 270-290    | x7 = 0                                   |
| 0x00000413    | addi x8, x0, 0                 | Инициализация x8 = 0 (результат)                                                  | 290-310    | x8 = 0                                  |
| 0x00300493    | addi x9, x0, 3                 | Инициализация x9 = 3 (константа)                                                  | 310-330    | x9 = 3                                 |
| 0x00000513    | addi x10, x0, 0                | Инициализация x10 = 0 (константа для сравнения)                                   | 330-350    | x10 = 0                                  |
| 0x00317133    | and x2, x2, x3                 | Применение маски 0x7 к x2 (x2 = x2 & 0x7)                                         | 350-370    | тут мы получаем три правых бита   sw_i   |
| 0x0030f2b3    | and x5, x1, x3                 | Применение маски 0x7 к x1 (x5 = x1 & 0x7)                                         | 370-390    |тут мы получаем три правых бита   a |
| 0x02510063    | beq x2, x5, 32                 | Переход на match_case если x2 == x5                                                | 390-410    | делаем их сравнение и переходим если равны через секцию         |
|##############|
|##############|
| 0x0060f3b3    | and x7, x1, x6                 | x7 = x1 & 0x1 (младший бит x1)                                                    | 410-430    |    вырезаем младший бит     |
| 0x004393b3    | sll x7, x7, x4                 | x7 = x7 << x4 (сдвиг на значение счетчика)                                        | 430-450    |   сдвигаем этот бит на его позицию           |
| 0x00746433    | or x8, x8, x7                  | x8 = x8 | x7 (накопление результата)    тут надо как раз смотреть                 | 450-470    |      добавляем его в число ответа      |
| 0x00620233    | add x4, x4, x6                 | x4 = x4 + 1 (инкремент счетчика)                                                  | 470-490    |  увеличиваем счетчик позиции      |
| 0x0010d093    | srli x1, x1, 1                 | x1 = x1 >> 1 (сдвиг вправо на 1 бит)                                              | 490-510    |   сдвигаем число на удаленнйы бит       |
| 0xfea090e3    | bne x1, x10, -32               | Переход на loop_start если x1 != 0                                                 | 510-530    |  если число еще не ноль возврат       |
| 0x0000006f    | jal x0, 0                      | Бесконечный цикл                                                                   | 530-550    |                                   |
|##############|
|##############|
| 0x0030d093    | srli x1, x1, 3                 | x1 = x1 >> 3 (сдвиг вправо на 3 бита)                                             | 550-570    | сдвигаем число на удаленнйы 3 бита  |
| 0xfca09ae3    | bne x1, x10, -44               | Переход на loop_start если x1 != 0                                                 | 570-590    |  если число еще не ноль возврат     |
| 0xff5ff06f    | jal x0, -12                    | Переход назад на 12 байт                                                           | 590-610    |                                   |


# JENIA
Вот исправленная и дополненная таблица для ModelSim (или другого симулятора), с корректными машинными кодами и временными метками:

| Машинный код  | Ассемблерная инструкция        | Описание поведения                                                                  | Время (нс) | Дополнительно                     |
|---------------|--------------------------------|-------------------------------------------------------------------------------------|------------|-----------------------------------|
| 0x000007b7    | lui x15, 0x0                   | Загрузка верхних 20 бит  в x15                                                     | 10-50      |  тут нолик                         |
| 0x50578793    | addi x15, x15, 0x505           | Добавление x15+const                                                               | 50-70      |  1285 наш                          |
| 0x00f02023    | sw x15, 0(x0)                  | Сохранение 0x50101 по адресу 0x0                                                   | 70-110     |  сохраняется                       |
| 0x00100093    | addi x1, x0, 1                 | Инициализация: x1 = 1 (a)                                                          | 110-130    |  1                                 |
| 0x00800293    | addi x5, x0, 8                 | x5 = 8 (сдвиг)                                                                     | 130-150    |  8                                 |
| 0x00002103    | lw x2, 0(x0)                   | Чтение входных данных: x2 = mem[0] (0x50101)                                       | 150-190    |  1285 в WD                         |
| 0x00815193    | srli x3, x2, 8                 | x3 = x2 >> 8 = 0x501 (d)                                                           | 190-210    |  5 в WD                            |
| 0x0ff00293    | addi x5, x0, 0xFF              | x5 = 0xFF (маска)                                                                  | 210-230    |  ff=255                            |
| 0x00517233    | and x4, x2, x5                 | x4 = x2 & 0xFF = 0x01 (n)   n=5                                                    | 230-250    |  5 в WD                            |
| 0x00100313    | addi x6, x0, 1                 | x6 = 1 (константа)                                                                 | 250-270    |  1                                 |
| 0x00000113    | addi x2, x0, 0                 | Обнуление x2                                                                       | 270-290    |  0                                 |
| 0x00000293    | addi x5, x0, 0                 | Обнуление x5                                                                       | 290-310    |  0                                 |
| 0x40620233    | sub x4, x4, x6                 | x4 = n - 1 = 4                                                                     | 310-330    |  4                                 |
| 0x004282b3    | add x5, x5, x4                 | x5 = x5 + x4 = 0                                                                   | 330-350    | итерация перый раз 4               |
| 0x406181b3    | sub x3, x3, x6                 | x3 = d - 1 делаем для эмуляции перемножения                                        | 350-370    |  итерация перый раз 4              |
| 0xfe304ce3    | blt x0 x3 -8                   | проверка что d еще больше чем 0 если да то на две строки вверх                     | 370-390    |                                    |


тут начинается цикл

| Машинный код  | Ассемблерная инструкция        | Описание поведения                                                                  | Время (нс) | Дополнительно                     |
|---------------|--------------------------------|-------------------------------------------------------------------------------------|------------|-----------------------------------|
| 0x004282b3    | add x5, x5, x4                 | x5 = x5 + x4 = 0                                                                   | 390-410    |  8                                 |
| 0x406181b3    | sub x3, x3, x6                 | x3 = d - 1 делаем для эмуляции перемножения                                        | 410-430    |  3                                 |
| 0xfe304ce3    | blt x0 x3 -8                   | проверка что d еще больше чем 0 если да то на две строки вверх                     | 430-450    |  0                                 |
|#########
| 0x004282b3    | add x5, x5, x4                 | x5 = x5 + x4 = 0                                                                   | 450-470    |  12                                |
| 0x406181b3    | sub x3, x3, x6                 | x3 = d - 1 делаем для эмуляции перемножения                                        | 490-510    |  2                                 |
| 0xfe304ce3    | blt x0 x3 -8                   | проверка что d еще больше чем 0 если да то на две строки вверх                     | 510-530    |  0                                 |
|#########
| 0x004282b3    | add x5, x5, x4                 | x5 = x5 + x4 = 0                                                                   | 530-550    |  16                                |
| 0x406181b3    | sub x3, x3, x6                 | x3 = d - 1 делаем для эмуляции перемножения                                        | 550-570    |  1                                 |
| 0xfe304ce3    | blt x0 x3 -8                   | проверка что d еще больше чем 0 если да то на две строки вверх                     | 570-590    |  0                                 |
|#########
| 0x004282b3    | add x5, x5, x4                 | x5 = x5 + x4 = 0                                                                   | 530-550    |  20                                |
| 0x406181b3    | sub x3, x3, x6                 | x3 = d - 1 делаем для эмуляции перемножения                                        | 550-570    |  0                                 |
| 0xfe304ce3    | blt x0 x3 -8                   | проверка что d еще больше чем 0 если да то на две строки вверх                     | 570-590    |  0  тут наконец будет вперед на 1  |
|#########
| 0x005080b3    | add x1 x1 x5                   | получение результата по формуле                                                    | 590-610    |  21                                |
